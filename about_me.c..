#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define MAX_MEMBERS 5
#define MAX_NAME_LEN 30
#define MAX_NICK_LEN 20
#define NUM_TESTS 7
#define DAYS 6

const char *exercise_types[][3] = {
    {"ëŸ¬ë‹", "ìì „ê±°", "ë¹ ë¥¸ ê±·ê¸°"},
    {"í‘¸ì‹œì—…", "ìŠ¤ì¿¼íŠ¸", ""},
    {"ë ˆê·¸ í”„ë ˆìŠ¤", "ë ˆê·¸ ì»¬", ""},
    {"ì² ë´‰", "í’€ì—… ë°”", ""},
    {"í”Œë­í¬", "í¬ëŸ°ì¹˜", ""}
};

const char *exercise_categories[] = {
    "ìœ ì‚°ì†Œ", "ì „ì‹  ê·¼ë ¥", "í•˜ì²´ ê·¼ë ¥", "ìƒì²´ ê·¼ë ¥", "ì½”ì–´"
};

const char *week_days[DAYS] = {"ì›”", "í™”", "ìˆ˜", "ëª©", "ê¸ˆ", "í† "};

typedef struct {
    char name[MAX_NAME_LEN];
    char nickname[MAX_NICK_LEN];
} Member;

Member milliways_members[MAX_MEMBERS] = {
    {"ì§€ë¯¼", "jimin"},
    {"íƒœí˜•", "taehyung"},
    {"ë‚¨ì¤€", "namjoon"},
    {"ìœ¤ê¸°", "yoongi"},
    {"ì •êµ­", "jungkook"}
};

char member_routine[MAX_MEMBERS][DAYS][40];

int findMemberIndexByName(const char *name) {
    for (int i = 0; i < MAX_MEMBERS; i++) {
        if (strcmp(milliways_members[i].name, name) == 0) return i;
    }
    return -1;
}

void printMembers() {
    printf("\n[ë©¤ë²„ ëª©ë¡]\n");
    for (int i = 0; i < MAX_MEMBERS; i++) {
        printf("  %s (%s)\n", milliways_members[i].name, milliways_members[i].nickname);
    }
}

void setExerciseRoutine() {
    char name[MAX_NAME_LEN];
    printMembers();
    printf("\nìš´ë™ ë£¨í‹´ì„ ì„¤ì •í•  ë©¤ë²„ ì´ë¦„ ì…ë ¥: ");
    scanf("%s", name);

    int idx = findMemberIndexByName(name);
    if (idx == -1) {
        printf("âš ï¸ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ë©¤ë²„ì…ë‹ˆë‹¤.\n");
        return;
    }

    int core_used = 0;

    for (int d = 0; d < DAYS; d++) {
        printf("\n[%s ìš”ì¼ ë£¨í‹´ ì„¤ì •]\n", week_days[d]);

        printf("  ìœ ì‚°ì†Œ ìš´ë™ ì„ íƒ:\n");
        for (int i = 0; i < 3; i++)
            printf("    %d. %s\n", i + 1, exercise_types[0][i]);
        int cardio;
        scanf("%d", &cardio);
        if (cardio < 1 || cardio > 3) {
            printf("âš ï¸ ìœ íš¨í•˜ì§€ ì•Šì€ ì„ íƒì…ë‹ˆë‹¤.\n");
            return;
        }

        printf("  ê·¼ë ¥/ì½”ì–´ ìš´ë™ ì„ íƒ:\n");
        int num = 1;
        for (int cat = 1; cat <= 4; cat++) {
            for (int i = 0; exercise_types[cat][i][0] != '\0'; i++) {
                printf("    %d%d. %s (%s)\n", cat, i + 1, exercise_types[cat][i], exercise_categories[cat]);
            }
        }

        char input[3];
        scanf("%s", input);
        int cat = input[0] - '0';
        int ex = input[1] - '1';

        if (cat < 1 || cat > 4 || exercise_types[cat][ex][0] == '\0') {
            printf("âš ï¸ ì˜ëª»ëœ ê·¼ë ¥/ì½”ì–´ ìš´ë™ ì„ íƒì…ë‹ˆë‹¤.\n");
            return;
        }

        if (cat == 4 && core_used) {
            printf("âš ï¸ ì½”ì–´ ìš´ë™ì€ ì£¼ 1íšŒë§Œ ê°€ëŠ¥í•©ë‹ˆë‹¤.\n");
            return;
        }

        if (cat == 4) core_used = 1;

        snprintf(member_routine[idx][d], 40, "%s + %s",
                 exercise_types[0][cardio - 1], exercise_types[cat][ex]);
    }

    printf("\nâœ… %së‹˜ì˜ ìš´ë™ ë£¨í‹´ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\n", name);
}

void getExerciseRoutine() {
    char name[MAX_NAME_LEN];
    printMembers();
    printf("\nìš´ë™ ë£¨í‹´ì„ ì¡°íšŒí•  ë©¤ë²„ ì´ë¦„ ì…ë ¥: ");
    scanf("%s", name);

    int idx = findMemberIndexByName(name);
    if (idx == -1) {
        printf("âš ï¸ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ë©¤ë²„ì…ë‹ˆë‹¤.\n");
        return;
    }

    printf("\n[ìš´ë™ ë£¨í‹´ - %s (%s)]\n", milliways_members[idx].name, milliways_members[idx].nickname);
    for (int d = 0; d < DAYS; d++) {
        printf("  %s: %s\n", week_days[d], member_routine[idx][d]);
    }
}

void showMenu() {
    int choice;
    do {
        printf("\n=== ë°€ë¦¬ì›¨ì´ì¦ˆ ê¸°ì´ˆ ë£¨í‹´ ì‹œìŠ¤í…œ ===\n");
        printf("1. ê¸°ì´ˆ ìš´ë™ ë£¨í‹´ ì„¤ì •\n");
        printf("2. ê¸°ì´ˆ ìš´ë™ ë£¨í‹´ ì¡°íšŒ\n");
        printf("0. ì¢…ë£Œ\n");
        printf("ë©”ë‰´ ì„ íƒ: ");
        scanf("%d", &choice);

        switch (choice) {
            case 1: setExerciseRoutine(); break;
            case 2: getExerciseRoutine(); break;
            case 0: printf("ğŸ‘‹ ì¢…ë£Œí•©ë‹ˆë‹¤.\n"); break;
            default: printf("âš ï¸ ì˜ëª»ëœ ì…ë ¥ì…ë‹ˆë‹¤.\n"); break;
        }
    } while (choice != 0);
}

int main() {
    showMenu();
    return 0;
}
