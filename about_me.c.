#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define MAX_MEMBERS 10
#define MAX_NAME_LEN 30
#define MAX_NICK_LEN 20
#define NUM_TESTS 7

// ì²´ë ¥ í•­ëª© ì´ë¦„
const char *test_names[NUM_TESTS] = {
    "1ë§ˆì¼ ëŸ¬ë‹", "ìŠ¤í”¼ë“œ ìŠ¤í”„ë¦°íŠ¸", "í‘¸ì‹œì—…", "ìŠ¤ì¿¼íŠ¸", "íŒ”êµ½í˜€ í´ê¸°", "ìˆ˜ì˜", "ë¬´ê²Œ ë“¤ê¸°"
};

// ë©¤ë²„ êµ¬ì¡°ì²´
typedef struct {
    char name[MAX_NAME_LEN];
    char nickname[MAX_NICK_LEN];
} Member;

// ì´ˆê¸° ë©¤ë²„ ì •ë³´
Member milliways_members[MAX_MEMBERS] = {
    {"ê³ ì€", "goeun"},
    {"ì›ì² ", "wonchul"},
    {"ì˜ì§„", "youngjin"},
    {"í˜œê²½", "hyekyung"},
    {"ì•„ì„œ", "arthur"}
};

int member_count = 5;

// ì²´ë ¥ ì ìˆ˜ ë°°ì—´
float health_scores[MAX_MEMBERS][NUM_TESTS] = {0};

// ë‹‰ë„¤ì„ ì¸ë±ìŠ¤ ì°¾ê¸°
int findMemberIndex(const char *nickname) {
    for (int i = 0; i < member_count; i++) {
        if (strcmp(milliways_members[i].nickname, nickname) == 0) {
            return i;
        }
    }
    return -1;
}

// ì²´ë ¥ ì…ë ¥ í•¨ìˆ˜
void setHealth() {
    char nickname[MAX_NICK_LEN];
    char input[256];

    printf("[ë‹‰ë„¤ì„ ì…ë ¥]: ");
    scanf("%s", nickname);

    int idx = findMemberIndex(nickname);
    if (idx == -1) {
        printf("âš ï¸ í•´ë‹¹ ë‹‰ë„¤ì„ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\n");
        return;
    }

    printf("7ê°œ í•­ëª© ë°ì´í„°ë¥¼ ì‰¼í‘œë¡œ êµ¬ë¶„í•´ ì…ë ¥í•˜ì„¸ìš”.\n");
    printf("ì˜ˆ: 12.5,13.0,5.2,4.8,6.1,10.9,1.3\n");
    printf("[ì…ë ¥]: ");
    scanf(" %[^\n]", input);

    char *token = strtok(input, ",");
    int count = 0;

    while (token && count < NUM_TESTS) {
        health_scores[idx][count++] = atof(token);
        token = strtok(NULL, ",");
    }

    if (count == NUM_TESTS) {
        printf("âœ… ë°ì´í„°ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\n");
    } else {
        printf("âš ï¸ í•­ëª© ìˆ˜ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤. ì‹¤íŒ¨.\n");
    }
}

// ì²´ë ¥ ì¡°íšŒ í•¨ìˆ˜
void getHealth() {
    char opt;
    printf("[ì „ì²´ ì¡°íšŒ(a) / ë‹‰ë„¤ì„ ì¡°íšŒ(b) / í•­ëª©ë³„ ì¡°íšŒ(c)] ì„ íƒ: ");
    scanf(" %c", &opt);

    if (opt == 'a') {
        for (int i = 0; i < member_count; i++) {
            printf("ì´ë¦„: %s, ë‹‰ë„¤ì„: %s\n", milliways_members[i].name, milliways_members[i].nickname);
            for (int j = 0; j < NUM_TESTS; j++) {
                printf("  %s: %.2f\n", test_names[j], health_scores[i][j]);
            }
            printf("--------------------------------------------------\n");
        }

    } else if (opt == 'b') {
        char nickname[MAX_NICK_LEN];
        printf("ì¡°íšŒí•  ë‹‰ë„¤ì„ ì…ë ¥: ");
        scanf("%s", nickname);
        int idx = findMemberIndex(nickname);

        if (idx == -1) {
            printf("âš ï¸ ë‹‰ë„¤ì„ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\n");
            return;
        }

        printf("ì´ë¦„: %s, ë‹‰ë„¤ì„: %s\n", milliways_members[idx].name, nickname);
        for (int j = 0; j < NUM_TESTS; j++) {
            printf("  %s: %.2f\n", test_names[j], health_scores[idx][j]);
        }

    } else if (opt == 'c') {
        char nickname[MAX_NICK_LEN];
        int test_idx;

        printf("ë‹‰ë„¤ì„ ì…ë ¥: ");
        scanf("%s", nickname);
        int idx = findMemberIndex(nickname);
        if (idx == -1) {
            printf("âš ï¸ ë‹‰ë„¤ì„ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\n");
            return;
        }

        printf("ì²´ë ¥ í•­ëª© ì„ íƒ (1~7):\n");
        for (int i = 0; i < NUM_TESTS; i++) {
            printf("%d. %s\n", i + 1, test_names[i]);
        }

        scanf("%d", &test_idx);
        if (test_idx < 1 || test_idx > NUM_TESTS) {
            printf("âš ï¸ ì˜ëª»ëœ ë²ˆí˜¸ì…ë‹ˆë‹¤.\n");
            return;
        }

        printf("ì´ë¦„: %s, ë‹‰ë„¤ì„: %s\n", milliways_members[idx].name, nickname);
        printf("  %s: %.2f\n", test_names[test_idx - 1], health_scores[idx][test_idx - 1]);

    } else {
        printf("âš ï¸ ì˜ëª»ëœ ì„ íƒì…ë‹ˆë‹¤.\n");
    }
}

// ë©”ë‰´
void showMenu() {
    int select;
    do {
        printf("\n===== ë°€ë¦¬ì›¨ì´ì¦ˆ íŠ¸ë ˆì´ë‹ ì‹œìŠ¤í…œ =====\n");
        printf("[II. í›ˆë ¨ > 1. ì²´ë ¥ê³¼ ì§€ì‹]\n");
        printf("  A. ì²´ë ¥ ìƒíƒœ ì…ë ¥ (1)\n");
        printf("  B. ì²´ë ¥ ìƒíƒœ ì¡°íšŒ (2)\n");
        printf("  ì¢…ë£Œ (0)\n");
        printf("ë©”ë‰´ ì„ íƒ: ");
        scanf("%d", &select);

        switch (select) {
            case 1:
                setHealth();
                break;
            case 2:
                getHealth();
                break;
            case 0:
                printf("ğŸ‘‹ í”„ë¡œê·¸ë¨ì„ ì¢…ë£Œí•©ë‹ˆë‹¤.\n");
                break;
            default:
                printf("âš ï¸ ìœ íš¨í•˜ì§€ ì•Šì€ ì„ íƒì…ë‹ˆë‹¤.\n");
        }
    } while (select != 0);
}

// ë©”ì¸
int main() {
    showMenu();
    return 0;
}
